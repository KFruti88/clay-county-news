<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clay County News Center | Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Georgia&display=swap" rel="stylesheet">
    
    <style>
        /* --- GLOBAL STYLING --- */
        body { margin: 0; background: #f4f4f4; font-family: 'Playfair Display', serif; color: #1a1a1a; overflow-x: hidden; }
        .master-wrapper { max-width: 1100px; margin: 0 auto; padding: 20px; }

        /* --- 100VW SMART NAVIGATION BAR --- */
        .custom-city-menu {
            width: 100vw;
            background: #ffffff;
            padding: 20px 0;
            font-family: sans-serif;
            border-bottom: 2px solid #eee;
            position: sticky;
            top: 0;
            z-index: 10000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .header-info {
            font-size: 0.85rem;
            color: #555;
            margin-bottom: 15px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .live-dot { width: 8px; height: 8px; background: #ff0000; border-radius: 50%; animation: blink 1s infinite; display: inline-block; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

        .city-nav {
            list-style: none;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 35px; /* Spaced out further */
            margin: 0;
            padding: 0;
        }

        .city-nav li a {
            text-decoration: none;
            font-weight: bold;
            padding: 10px 22px;
            border-radius: 6px;
            font-size: 0.95rem;
            transition: all 0.4s ease; /* Smooth Color Flip */
            border: 2px solid transparent;
        }

        /* --- COLOR FLIP HOVER LOGIC --- */
        /* Flora: Blue & Orange */
        .btn-flora a { background-color: #00205b; color: #fe4f00; }
        .btn-flora a:hover { background-color: #fe4f00; color: #00205b; }

        /* Louisville: Black & Red */
        .btn-louisville a { background-color: #060404; color: #d61a21; }
        .btn-louisville a:hover { background-color: #d61a21; color: #060404; }

        /* Clay City: Royal Blue & White */
        .btn-claycity a { background-color: #0c30f0; color: #ffffff; }
        .btn-claycity a:hover { background-color: #ffffff; color: #0c30f0; border-color: #0c30f0; }

        /* Xenia: Deep Green & White */
        .btn-xenia a { background-color: #1b5e20; color: #ffffff; }
        .btn-xenia a:hover { background-color: #ffffff; color: #1b5e20; border-color: #1b5e20; }

        /* --- NEWS CARDS --- */
        .glass-card { 
            background: white; 
            padding: 40px; 
            margin-top: 40px;
            margin-bottom: 40px; 
            border-radius: 15px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.05); 
            border-left: 0px solid #2ea3f2;
            transition: all 0.5s ease;
            scroll-margin-top: 150px; 
        }

        @keyframes highlightPulse {
            0% { background: #fff; }
            50% { background: #f0f7ff; border-left-width: 15px; }
            100% { background: #fff; }
        }
        .jump-highlight {
            animation: highlightPulse 2s ease-out;
            border-left: 12px solid #2ea3f2 !important;
        }

        .town-badge { display: inline-block; padding: 6px 15px; border-radius: 4px; color: #fff; font-size: 0.8rem; font-weight: bold; margin-bottom: 15px; text-transform: uppercase; font-family: sans-serif; }
        .content-body { font-family: 'Georgia', serif; font-size: 1.25rem; line-height: 1.9; color: #222; text-align: justify; white-space: pre-line; }

        /* --- RESPONSIVE --- */
        @media (max-width: 850px) {
            .city-nav { flex-direction: column; gap: 12px; }
            .header-info { flex-direction: column; gap: 5px; }
            .custom-city-menu { width: 100%; }
        }
    </style>
</head>
<body>

<div class="custom-city-menu">
    <div class="header-info">
        <span id="header-date">Loading...</span>
        <span id="header-clock"><div class="live-dot"></div> 00:00:00 PM</span>
        <span id="header-weather">62839 Weather...</span>
    </div>
    <ul class="city-nav">
        <li><a href="index.html" style="color:#333;">Home</a></li>
        <li class="btn-claycity"><a href="#">Clay City</a></li>
        <li class="btn-xenia"><a href="#">Xenia</a></li>
        <li class="btn-flora"><a href="#">Flora</a></li>
        <li class="btn-louisville"><a href="#">Louisville</a></li>
    </ul>
</div>

<div class="master-wrapper">
    <h1 style="text-align:center; font-size: 3.5rem;">County News Archive</h1>
    <div id="full-news-container">üóûÔ∏è Fetching the Latest Articles...</div>
</div>

<script>
    const newsJson = 'news_data.json';

    // 1. CLOCK LOGIC
    function updateHeader() {
        const now = new Date();
        document.getElementById('header-date').innerText = now.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
        document.getElementById('header-clock').innerHTML = `<div class="live-dot"></div> ` + now.toLocaleTimeString();
    }
    setInterval(updateHeader, 1000);
    updateHeader();

    // 2. EMOJI LOGIC
    function getEmoji(item) {
        const text = ((item.title || "") + " " + (item.full_story || "")).toLowerCase();
        if (text.includes("tornado") || text.includes("severe") || text.includes("warning")) return "‚ö†Ô∏è";
        if (text.includes("fire")) return "üöí";
        if (text.includes("police") || text.includes("sheriff") || text.includes("arrest")) return "üöî";
        if (text.includes("obituary") || text.includes("funeral")) return "üïäÔ∏è";
        if (text.includes("tax") || text.includes("price") || text.includes("cost")) return "üí≤";
        if (text.includes("basketball") || text.includes("football")) return "üèÄ";
        if (text.includes("school") || text.includes("bus")) return "üöå";
        return "üì∞";
    }

    // 3. TOWN BRANDING
    function getBranding(tags) {
        if (!tags) return { color: '#333', name: 'County News' };
        const t = tags[0].toLowerCase();
        if (t.includes('flora')) return { color: '#fe4f00', name: 'Flora' };
        if (t.includes('louisville')) return { color: '#d61a21', name: 'Louisville' };
        if (t.includes('clay city')) return { color: '#0c30f0', name: 'Clay City' };
        if (t.includes('xenia')) return { color: '#1b5e20', name: 'Xenia' };
        return { color: '#333', name: tags[0] };
    }

    // 4. FETCH AND RENDER
    fetch(newsJson).then(res => res.json()).then(data => {
        const container = document.getElementById('full-news-container');
        container.innerHTML = '';

        data.forEach(item => {
            const brand = getBranding(item.tags);
            const icon = getEmoji(item);
            
            container.innerHTML += `
                <article class="glass-card" id="${item.id}">
                    <div class="town-badge" style="background:${brand.color}">${brand.name}</div>
                    <h2><span>${icon}</span> ${item.title}</h2>
                    <div class="content-body">${item.full_story}</div>
                    <hr style="margin-top:30px; opacity:0.1;">
                    <p style="font-size:0.8rem; color:#888;">Source: ${item.source} | Posted: ${item.date}</p>
                </article>`;
        });

        // 5. BOOKMARK AUTO-SCROLL
        if (window.location.hash) {
            const targetId = window.location.hash.substring(1);
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
                setTimeout(() => {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    targetElement.classList.add('jump-highlight');
                }, 800);
            }
        }
    });

    // 6. WEATHER (Flora 62839)
    async function getWeather() {
        try {
            const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=38.67&longitude=-88.48&current_weather=true&temperature_unit=fahrenheit`);
            const data = await res.json();
            document.getElementById('header-weather').innerText = `${Math.round(data.current_weather.temperature)}¬∞F ‚Ä¢ Flora`;
        } catch (e) { console.log("Weather error"); }
    }
    getWeather();
</script>
</body>
</html>
