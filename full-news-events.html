<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clay County News Center | Full Archive</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Georgia&display=swap" rel="stylesheet">
    
    <style>
        /* --- GLOBAL STYLING --- */
        body { margin: 0; background: #f4f4f4; font-family: 'Playfair Display', serif; color: #1a1a1a; overflow-x: hidden; scroll-behavior: smooth; }
        .master-wrapper { max-width: 1100px; margin: 0 auto; padding: 20px; }

        /* --- 100VW CENTERED NAVIGATION BAR --- */
        .custom-city-menu {
            width: 100vw;
            background: #ffffff;
            padding: 25px 0;
            font-family: sans-serif;
            border-bottom: 2px solid #eee;
            position: sticky;
            top: 0;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        /* Live Header: Date, Time, Weather */
        .header-info {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        /* COLOR INVERSION LOGIC (Date & Time) */
        .invert-me {
            mix-blend-mode: difference;
            color: #ffffff; /* Inverts against white BG to look Black */
            font-weight: 900;
            font-size: 1rem;
            letter-spacing: 0.5px;
        }

        .live-dot { width: 8px; height: 8px; background: #ff0000; border-radius: 50%; animation: blink 1s infinite; display: inline-block; margin-right: 5px; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } }

        /* DYNAMIC WEATHER COLORS */
        .weather-clear { color: #FDB813 !important; font-weight: 900; }
        .weather-cloudy { color: #939BA4 !important; font-weight: bold; }
        .weather-rainy { color: #395877 !important; font-weight: bold; }
        .weather-snow { mix-blend-mode: difference; color: #ffffff; font-weight: 900; }

        /* SYMMETRICAL NAV LIST (Xenia at Center) */
        .city-nav {
            list-style: none;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            margin: 0; padding: 0;
        }

        .city-nav li a {
            text-decoration: none;
            font-weight: bold;
            padding: 12px 22px;
            border-radius: 8px;
            transition: all 0.4s ease;
            display: block;
            text-align: center;
            min-width: 115px;
        }

        /* --- COLOR FLIPS & LINKS --- */
        /* Center Point: Xenia (Green/White) */
        .btn-xenia a { background-color: #1b5e20; color: #ffffff; transform: scale(1.1); box-shadow: 0 4px 10px rgba(27,94,32,0.3); }
        .btn-xenia a:hover { background-color: #ffffff; color: #1b5e20; border: 2px solid #1b5e20; }

        .btn-home a { color: #333; border: 1px solid #ccc; }
        .btn-home a:hover { background: #eee; }
        
        .btn-claycity a { background-color: #0c30f0; color: #fff; }
        .btn-claycity a:hover { background-color: #fff; color: #0c30f0; border: 2px solid #0c30f0; }

        .btn-flora a { background-color: #00205b; color: #fe4f00; }
        .btn-flora a:hover { background-color: #fe4f00; color: #00205b; }

        .btn-louisville a { background-color: #060404; color: #d61a21; }
        .btn-louisville a:hover { background-color: #d61a21; color: #060404; }

        /* Hide logic for current page */
        .hide-current { display: none !important; }

        /* --- NEWS CARDS --- */
        .glass-card { 
            background: white; padding: 40px; margin-top: 40px; border-radius: 15px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.05); transition: 0.5s; scroll-margin-top: 150px; 
        }
        .jump-highlight { border-left: 12px solid #2ea3f2 !important; animation: highlightPulse 2s ease-out; }
        @keyframes highlightPulse { 0% { background: #fff; } 50% { background: #f0f7ff; } 100% { background: #fff; } }

        .content-body { font-family: 'Georgia', serif; font-size: 1.25rem; line-height: 1.9; color: #222; text-align: justify; white-space: pre-line; }
        .content-body img { max-width: 100%; height: auto; border-radius: 8px; margin-top: 15px; }

        @media (max-width: 850px) {
            .city-nav { flex-direction: column; gap: 12px; width: 100%; }
            .city-nav li a { min-width: 220px; transform: scale(1); }
        }
    </style>
</head>
<body>

<div class="custom-city-menu">
    <div class="header-info">
        <span id="header-date" class="invert-me">Date Loading...</span>
        <span id="header-clock" class="invert-me"><div class="live-dot"></div> 00:00:00 PM</span>
        <span id="header-weather">Flora Weather...</span>
    </div>

    <ul class="city-nav">
        <li id="nav-home" class="btn-home"><a href="index.html">Home Hub</a></li>
        <li id="nav-clay-city" class="btn-claycity"><a href="https://supportmylocalcommunity.com/clay-city/" target="_blank">Clay City</a></li>
        
        <li id="nav-xenia" class="btn-xenia"><a href="https://supportmylocalcommunity.com/xenia/" target="_blank">Xenia</a></li>
        
        <li id="nav-flora" class="btn-flora"><a href="https://ourflora.com/" target="_blank">Flora</a></li>
        <li id="nav-louisville" class="btn-louisville"><a href="https://supportmylocalcommunity.com/louisville/" target="_blank">Louisville</a></li>
    </ul>
</div>

<div class="master-wrapper">
    <h1 style="text-align:center; font-size: 3.5rem;">County News Archive</h1>
    <div id="full-news-container">üóûÔ∏è Synchronizing News Feed...</div>
</div>

<script>
    // 1. SMART HIDE LOGIC
    function hideCurrentPage() {
        const path = window.location.pathname;
        if (path.includes("index.html") || path === "/") document.getElementById("nav-home").classList.add("hide-current");
        else if (path.includes("clay-city")) document.getElementById("nav-clay-city").classList.add("hide-current");
        else if (path.includes("xenia")) document.getElementById("nav-xenia").classList.add("hide-current");
        else if (path.includes("flora")) document.getElementById("nav-flora").classList.add("hide-current");
        else if (path.includes("louisville")) document.getElementById("nav-louisville").classList.add("hide-current");
    }
    hideCurrentPage();

    // 2. CLOCK & INVERSION
    function updateHeader() {
        const now = new Date();
        document.getElementById('header-date').innerText = now.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
        document.getElementById('header-clock').innerHTML = `<div class="live-dot"></div> ` + now.toLocaleTimeString();
    }
    setInterval(updateHeader, 1000);
    updateHeader();

    // 3. DYNAMIC WEATHER COLORS
    async function updateWeather() {
        try {
            const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=38.67&longitude=-88.48&current_weather=true&temperature_unit=fahrenheit`);
            const data = await res.json();
            const temp = Math.round(data.current_weather.temperature);
            const code = data.current_weather.weathercode;
            const wElem = document.getElementById('header-weather');
            wElem.className = ''; 
            let desc = "Weather";
            if (code === 0) { desc = "Clear"; wElem.classList.add('weather-clear'); }
            else if (code <= 3) { desc = "Cloudy"; wElem.classList.add('weather-cloudy'); }
            else if (code >= 51 && code <= 67) { desc = "Rainy"; wElem.classList.add('weather-rainy'); }
            else if (code >= 71 && code <= 77) { desc = "Snow"; wElem.classList.add('weather-snow'); }
            wElem.innerText = `${temp}¬∞F ‚Ä¢ ${desc}`;
        } catch (e) { console.log("Weather error"); }
    }
    updateWeather();

    // 4. NEWS RENDERER
    const newsJson = 'news_data.json';
    fetch(newsJson).then(res => res.json()).then(data => {
        const container = document.getElementById('full-news-container');
        container.innerHTML = '';
        data.forEach(item => {
            container.innerHTML += `
                <article class="glass-card" id="${item.id}">
                    <h2>${item.title}</h2>
                    <div class="content-body">${item.full_story}</div>
                    <p style="font-size:0.85rem; color:#888; margin-top:20px;">Source: ${item.source} | ${item.date}</p>
                </article>`;
        });
        
        // Auto-scroll Bookmark
        if (window.location.hash) {
            const target = document.getElementById(window.location.hash.substring(1));
            if (target) { setTimeout(() => { target.scrollIntoView({ behavior: 'smooth' }); target.classList.add('jump-highlight'); }, 800); }
        }
    });
</script>
</body>
</html>
