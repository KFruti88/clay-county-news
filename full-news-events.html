<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clay County News Center | Full Articles</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Georgia&display=swap" rel="stylesheet">
    
    <style>
        /* --- GLOBAL STYLING --- */
        body { margin: 0; background: #f4f4f4; font-family: 'Playfair Display', serif; color: #1a1a1a; scroll-behavior: smooth; }
        .master-wrapper { max-width: 900px; margin: 0 auto; padding: 40px 20px; }
        
        h1 { text-align: center; font-size: clamp(2rem, 8vw, 3.5rem); margin-bottom: 40px; border-bottom: 5px solid #1a1a1a; padding-bottom: 10px; }

        /* --- NEWS CARDS --- */
        .glass-card { 
            background: white; 
            padding: 40px; 
            margin-bottom: 50px; 
            border-radius: 15px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.05); 
            border-left: 0px solid #2ea3f2;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            scroll-margin-top: 50px; /* Offset for the jump so the title isn't cut off */
        }

        /* --- JUMP HIGHLIGHT ANIMATION --- */
        @keyframes highlightPulse {
            0% { background: #fff; transform: scale(1); }
            50% { background: #f0f7ff; transform: scale(1.01); border-left-width: 15px; }
            100% { background: #fff; transform: scale(1); }
        }
        .jump-highlight {
            animation: highlightPulse 2s ease-out;
            border-left: 12px solid #2ea3f2 !important;
        }

        /* --- CONTENT STYLING --- */
        .town-badge { 
            display: inline-block; 
            padding: 6px 15px; 
            border-radius: 4px; 
            color: #fff; 
            font-size: 0.8rem; 
            font-weight: bold; 
            margin-bottom: 15px; 
            text-transform: uppercase; 
            font-family: sans-serif; 
        }

        h2 { font-size: 2.2rem; margin: 10px 0 20px; line-height: 1.2; display: flex; align-items: center; gap: 15px; }
        
        .content-body { 
            font-family: 'Georgia', serif; 
            font-size: 1.25rem; 
            line-height: 1.9; 
            color: #222; 
            text-align: justify; 
            white-space: pre-line; /* Essential to keep paragraph breaks from the scraper */
        }

        .meta-info { 
            margin-top: 30px; 
            padding-top: 20px; 
            border-top: 1px solid #eee; 
            font-family: sans-serif; 
            font-size: 0.85rem; 
            color: #777; 
            display: flex; 
            justify-content: space-between; 
        }

        /* Responsive Adjustments */
        @media (max-width: 600px) {
            .glass-card { padding: 25px; }
            h2 { font-size: 1.7rem; }
            .meta-info { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>

<div class="master-wrapper">
    <h1>County News Archive</h1>
    <div id="full-news-container">
        <p style="text-align:center;">üóûÔ∏è Loading Clay County News Feed...</p>
    </div>
</div>

<script>
    // Link to your live data
    const newsJson = 'news_data.json';

    // 1. BRANDING LOGIC
    function getTownBranding(tags) {
        if (!tags || tags.length === 0) return { color: '#2ea3f2', name: 'County News' };
        const t = tags[0].toLowerCase();
        if (t.includes('flora')) return { color: '#fe4f00', name: 'Flora' };
        if (t.includes('louisville')) return { color: '#d61a21', name: 'Louisville' };
        if (t.includes('clay city')) return { color: '#0c30f0', name: 'Clay City' };
        if (t.includes('xenia')) return { color: '#1b5e20', name: 'Xenia' };
        return { color: '#2ea3f2', name: tags[0] };
    }

    // 2. PERMANENT EMOJI LOGIC
    function getEmoji(item) {
        const text = ((item.title || "") + " " + (item.full_story || "")).toLowerCase();
        if (text.includes("tornado") || text.includes("severe") || text.includes("warning")) return "‚ö†Ô∏è";
        if (text.includes("fire")) return "üöí";
        if (text.includes("police") || text.includes("sheriff") || text.includes("arrest")) return "üöî";
        if (text.includes("obituary") || text.includes("funeral")) return "üïäÔ∏è";
        if (text.includes("tax") || text.includes("price") || text.includes("cost")) return "üí≤";
        if (text.includes("football")) return "üèà";
        if (text.includes("basketball")) return "üèÄ";
        if (text.includes("school") || text.includes("bus")) return "üöå";
        if (text.includes("church") || text.includes("pastor")) return "‚õ™";
        if (text.includes("watermelon")) return "üçâ";
        if (text.includes("nasa") || text.includes("comet")) return "üî≠";
        if (text.includes("christmas")) return "üéÑ";
        if (text.includes("thanksgiving")) return "ü¶É";
        if (text.includes("halloween")) return "üéÉ";
        if (text.includes("state news") || text.includes("illinois")) return "üèõÔ∏è";
        return "üì∞";
    }

    // 3. FETCH AND DISPLAY
    fetch(newsJson)
        .then(res => {
            if (!res.ok) throw new Error("Database not found");
            return res.json();
        })
        .then(data => {
            const container = document.getElementById('full-news-container');
            container.innerHTML = '';

            if (data.length === 0) {
                container.innerHTML = '<p style="text-align:center;">No stories currently in the archive.</p>';
                return;
            }

            data.forEach(item => {
                const brand = getTownBranding(item.tags);
                const icon = getEmoji(item);
                
                container.innerHTML += `
                    <article class="glass-card" id="${item.id}">
                        <div class="town-badge" style="background:${brand.color}">${brand.name}</div>
                        <h2><span>${icon}</span> ${item.title}</h2>
                        <div class="content-body">${item.full_story}</div>
                        <div class="meta-info">
                            <span>Source: <strong>${item.source || 'Local News'}</strong></span>
                            <span>Posted: ${item.date || 'Recently'}</span>
                        </div>
                    </article>`;
            });

            // 4. THE SMOOTH JUMP (Bookmark logic)
            if (window.location.hash) {
                const targetId = window.location.hash.substring(1);
                const targetElement = document.getElementById(targetId);

                if (targetElement) {
                    // Wait for rendering to finish, then jump
                    setTimeout(() => {
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        targetElement.classList.add('jump-highlight');
                    }, 800);
                }
            }
        })
        .catch(err => {
            document.getElementById('full-news-container').innerHTML = 
                `<p style="text-align:center; color:red;">Sync Error: ${err.message}. Please check news_data.json.</p>`;
        });
</script>
</body>
</html>
