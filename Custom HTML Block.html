<div id="newspaper-container">
    <div class="newspaper-header">
        <h1>Clay County News Center</h1>
        <div class="newspaper-meta">
            <span id="current-date"></span>
            <span id="chicago-time"></span>
            <span>Full County Edition</span>
        </div>
    </div>
    <div id="news-grid">Loading the latest headlines...</div>
</div>

<style>
    /* Main Layout */
    #newspaper-container { 
        padding: 30px; 
        border-radius: 12px; 
        font-family: 'Times New Roman', serif; 
        background: #fff; 
        box-shadow: 0 10px 40px rgba(0,0,0,0.1); 
        max-width: 1100px; 
        margin: auto; 
    }

    .newspaper-header h1 {
        font-size: 3rem;
        text-align: center;
        text-transform: uppercase;
        margin-bottom: 10px;
        font-weight: 900;
    }

    .newspaper-meta { 
        border-top: 2px solid #000; 
        border-bottom: 5px solid #000; 
        padding: 10px 0; 
        display: flex; 
        justify-content: space-between; 
        font-weight: bold; 
        margin-bottom: 25px; 
    }

    /* Article Card Design */
    .article { 
        padding: 30px; 
        border-radius: 8px; 
        margin-bottom: 30px; 
        border-left: 15px solid #333; /* Default gray border */
        background: #f9f9f9; 
        box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
    }

    .article h3 { 
        font-size: 1.8rem; 
        text-transform: uppercase; 
        margin: 10px 0; 
        border-bottom: 1px solid #ddd; 
        padding-bottom: 5px; 
    }

    .story-body { font-size: 1.1rem; line-height: 1.6; color: #222; }

    /* TOWN SPECIFIC COLORS (This is the magic part) */
    
    /* Flora: Navy & Orange Wolves */
    .border-flora { border-left-color: #FA4616 !important; } /* Orange Border */
    .badge-flora { background: #002060 !important; color: #fff; } /* Navy Badge */

    /* Clay City: Royal Blue & White Wolves */
    .border-claycity { border-left-color: #0c30f0 !important; } /* Royal Blue Border */
    .badge-claycity { background: #0c30f0 !important; color: #fff; border: 1px solid #0c30f0; }

    /* Louisville: Cardinal Red & Black Cardinals */
    .border-louisville { border-left-color: #C41E3A !important; } /* Cardinal Red Border */
    .badge-louisville { background: #000 !important; color: #fff; } /* Black Badge */

    /* County News: Neutral */
    .border-county { border-left-color: #333 !important; }
    .badge-county { background: #333 !important; color: #fff; }

    .town-badge { 
        display: inline-block; 
        padding: 4px 12px; 
        border-radius: 4px; 
        font-size: 0.85rem; 
        font-weight: bold; 
        margin-bottom: 10px; 
    }
</style>

<script>
(async () => {
    // Make sure this URL matches your GitHub project
    const DATA_URL = "https://raw.githubusercontent.com/KFruti88/clay-county-news/main/news_data.json";
    
    // Set Current Date
    document.getElementById('current-date').innerText = new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

    // Live Clock Logic
    function updateClock() {
        const options = { timeZone: 'America/Chicago', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
        document.getElementById('chicago-time').innerText = new Intl.DateTimeFormat([], options).format(new Date());
    }
    updateClock(); 
    setInterval(updateClock, 1000);

    try {
        const res = await fetch(DATA_URL);
        const data = await res.json();
        const grid = document.getElementById('news-grid');
        grid.innerHTML = "";

        data.forEach(story => {
            // Default setup for County News
            let colorClass = "county";
            let mascot = "üì¢"; 
            let tagLabel = "COUNTY-WIDE";

            // CHECK TAGS AND SWAP MASCOT/COLORS
            if (story.tags.includes("Flora")) {
                colorClass = "flora";
                mascot = "üê∫";
                tagLabel = "FLORA WOLVES";
            } else if (story.tags.includes("Clay City")) {
                colorClass = "claycity";
                mascot = "üê∫";
                tagLabel = "CLAY CITY WOLVES";
            } else if (story.tags.includes("Louisville")) {
                colorClass = "louisville";
                mascot = "üê¶";
                tagLabel = "LOUISVILLE CARDINALS";
            }

            // Build the article HTML
            grid.innerHTML += `
                <div class="article border-${colorClass}">
                    <span class="town-badge badge-${colorClass}">${mascot} ${tagLabel} EDITION</span>
                    <h3>${story.title}</h3>
                    <div class="story-body">
                        <strong>[${story.category}]</strong><br>
                        ${story.description}
                    </div>
                </div>`;
        });
    } catch (e) { 
        console.error("News load error:", e); 
        document.getElementById('news-grid').innerHTML = "Unable to load news data. Please check GitHub Action status.";
    }
})();
</script>
