<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clay County News Center</title>
    <style>
        body { margin: 0; background: #f4f4f4; font-family: 'Playfair Display', serif; }
        .master-wrapper { max-width: 1100px; margin: 0 auto; padding: 20px; }
        
        /* The News Cards */
        .glass-card { 
            background: white; padding: 30px; margin-bottom: 30px; border-radius: 12px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); border-left: 0px solid #2ea3f2;
            transition: all 0.5s ease;
        }

        /* The Animation for the Bookmarked Story */
        @keyframes highlightPulse {
            0% { background: #fff; }
            50% { background: #eef9ff; }
            100% { background: #fff; }
        }
        .jump-highlight {
            animation: highlightPulse 2s ease-out;
            border-left: 10px solid #2ea3f2 !important;
            box-shadow: 0 0 20px rgba(46, 163, 242, 0.2);
        }

        .town-badge { display: inline-block; padding: 5px 12px; border-radius: 4px; color: #fff; font-size: 0.7rem; font-weight: bold; margin-bottom: 10px; background: #1a1a1a; font-family: sans-serif; }
        .content-body { font-family: 'Georgia', serif; font-size: 1.15rem; line-height: 1.8; text-align: justify; }
        
        /* Style for the Emoji icon in the title */
        .news-icon { margin-right: 10px; }
    </style>
</head>
<body>

<div class="master-wrapper">
    <h1>Clay County Full Articles</h1>
    <div id="news-feed-container">Loading latest news...</div>
</div>

<script>
    const newsJson = './news_data.json';

    // 1. TOWN BRANDING COLORS
    function getTownColor(tags) {
        if (!tags || tags.length === 0) return '#2ea3f2';
        const t = tags[0].toLowerCase();
        if (t.includes('flora')) return '#fe4f00';
        if (t.includes('louisville')) return '#d61a21';
        return '#2ea3f2';
    }

    // 2. PERMANENT EMOJI LOGIC
    function getEmoji(item) {
        const text = ((item.title || "") + " " + (item.full_story || "")).toLowerCase();
        if (text.includes("tornado") || text.includes("severe") || text.includes("warning")) return "âš ï¸";
        if (text.includes("fire")) return "ðŸš’";
        if (text.includes("police") || text.includes("sheriff") || text.includes("arrest")) return "ðŸš”";
        if (text.includes("obituary") || text.includes("funeral")) return "ðŸ•Šï¸";
        if (text.includes("tax") || text.includes("price") || text.includes("cost")) return "ðŸ’²";
        if (text.includes("football")) return "ðŸˆ";
        if (text.includes("basketball")) return "ðŸ€";
        if (text.includes("school") || text.includes("bus")) return "ðŸšŒ";
        if (text.includes("church") || text.includes("pastor")) return "â›ª";
        if (text.includes("watermelon")) return "ðŸ‰";
        if (text.includes("nasa") || text.includes("comet")) return "ðŸ”­";
        if (text.includes("christmas")) return "ðŸŽ„";
        if (text.includes("thanksgiving")) return "ðŸ¦ƒ";
        if (text.includes("halloween")) return "ðŸŽƒ";
        if (text.includes("state news") || text.includes("illinois")) return "ðŸ›ï¸";
        return "ðŸ“°";
    }

    fetch(newsJson).then(res => res.json()).then(data => {
        const container = document.getElementById('news-feed-container');
        container.innerHTML = '';

        data.forEach(item => {
            const accent = getTownColor(item.tags);
            const icon = getEmoji(item); // Get the dynamic emoji
            
            container.innerHTML += `
                <article class="glass-card" id="${item.id}">
                    <div class="town-badge" style="background:${accent}">${item.tags ? item.tags[0] : 'General News'}</div>
                    <h2><span class="news-icon">${icon}</span>${item.title}</h2>
                    <div class="content-body">${item.full_story}</div>
                    <hr>
                    <p style="font-size:0.8rem; color:#888;">Source: ${item.source || 'Local Source'} | Date: ${item.date || 'Recently'}</p>
                </article>`;
        });

        // THE BOOKMARK HANDLER (Scroll to ID)
        if (window.location.hash) {
            const targetId = window.location.hash.substring(1);
            const targetElement = document.getElementById(targetId);

            if (targetElement) {
                setTimeout(() => {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    targetElement.classList.add('jump-highlight');
                }, 600);
            }
        }
    });
</script>
</body>
</html>
