<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clay County News Center</title>
    <style>
        /* 1. RESPONSIVE FOUNDATION */
        body { margin: 0; background: transparent; font-family: 'Playfair Display', serif; }
        .news-center-wrapper { max-width: 1100px; margin: 0 auto; padding: 20px; }
        
        .center-title { 
            text-align: center; 
            font-size: clamp(2rem, 8vw, 3.2rem); /* Responsive font size */
            margin-bottom: 40px; 
            border-bottom: 4px solid #1a1a1a; 
            padding-bottom: 15px; 
        }

        /* 2. RESPONSIVE GRID */
        #full-news-archive {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* 3. GLASS CARD STYLING */
        .full-story-block { 
            scroll-margin-top: 100px; 
            padding: clamp(20px, 5vw, 40px); /* Padding shrinks on mobile */
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        }

        .town-brand-tag {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 4px;
            color: #fff;
            font-weight: bold;
            font-size: 0.8rem;
            text-transform: uppercase;
            margin-bottom: 15px;
        }

        .full-story-block h2 { 
            font-size: clamp(1.5rem, 5vw, 2.4rem); 
            color: #111; 
            margin: 10px 0;
            line-height: 1.2;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .content-body { 
            font-family: 'Georgia', serif; 
            font-size: clamp(1rem, 3vw, 1.25rem); 
            line-height: 1.8; 
            color: #222; 
            text-align: justify; 
        }

        .meta-info { font-size: 0.8rem; color: #666; margin-bottom: 15px; font-family: sans-serif; }

        /* MOBILE OPTIMIZATIONS */
        @media (max-width: 600px) {
            .full-story-block { padding: 20px; border-radius: 0; } /* Flush edge on tiny screens */
            .full-story-block h2 { flex-wrap: wrap; } /* Icon and text stack if needed */
        }
    </style>
</head>
<body>

    <div class="news-center-wrapper">
        <h1 class="center-title">Clay County News Center</h1>
        <div id="full-news-archive">
            <p style="text-align:center;">üóûÔ∏è Loading the Daily Archive...</p>
        </div>
    </div>

    <script>
        const jsonUrl = 'https://raw.githubusercontent.com/KFruti88/clay-county-news/main/news_data.json';

        function getTownBranding(tags) {
            const tagStr = tags ? tags.join(' ').toLowerCase() : "";
            if (tagStr.includes('flora')) return { border: '#0c0b82', badge: '#fe4f00', name: 'Flora' };
            if (tagStr.includes('louisville')) return { border: '#990000', badge: '#131314', name: 'Louisville' };
            if (tagStr.includes('clay city')) return { border: '#0c30f0', badge: '#0c30f0', name: 'Clay City' };
            return { border: '#1a1a1a', badge: '#2ea3f2', name: 'Clay County' };
        }

                   // 2. PERMANENT EMOJI LOGIC
    function getEmoji(item) {
        const text = ((item.title || "") + " " + (item.full_story || "")).toLowerCase();
        if (text.includes("tornado") || text.includes("severe") || text.includes("warning")) return "‚ö†Ô∏è";
        if (text.includes("fire")) return "üöí";
        if (text.includes("police") || text.includes("sheriff") || text.includes("arrest")) return "üöî";
        if (text.includes("obituary") || text.includes("funeral")) return "üïäÔ∏è";
        if (text.includes("tax") || text.includes("price") || text.includes("cost")) return "üí≤";
        if (text.includes("football")) return "üèà";
        if (text.includes("basketball")) return "üèÄ";
        if (text.includes("school") || text.includes("bus")) return "üöå";
        if (text.includes("church") || text.includes("pastor")) return "‚õ™";
        if (text.includes("watermelon")) return "üçâ";
        if (text.includes("nasa") || text.includes("comet")) return "üî≠";
        if (text.includes("christmas")) return "üéÑ";
        if (text.includes("thanksgiving")) return "ü¶É";
        if (text.includes("halloween")) return "üéÉ";
        if (text.includes("state news") || text.includes("illinois")) return "üèõÔ∏è";
        return "üì∞"; 
        }

        fetch(jsonUrl).then(res => res.json()).then(data => {
            const container = document.getElementById('full-news-archive');
            container.innerHTML = '';

            data.forEach(item => {
                const branding = getTownBranding(item.tags);
                const icon = getEmoji(item);
                const slug = item.slug || item.title.toLowerCase().replace(/[^\w\s-]/g, '').replace(/[\s_-]+/g, '-');
                
                container.innerHTML += `
                    <article class="full-story-block" id="${slug}" style="border-top: 8px solid ${branding.border}">
                        <div class="town-brand-tag" style="background-color: ${branding.badge}">${branding.name} Edition</div>
                        <div class="meta-info">Published: ${item.date_added ? item.date_added.split('T')[0] : 'Today'}</div>
                        <h2><span>${icon}</span> ${item.title}</h2>
                        <div class="content-body">${item.full_story}</div>
                    </article>
                `;
            });

            // BOOKMARK JUMP
            if (window.location.hash) {
                setTimeout(() => {
                    const el = document.getElementById(window.location.hash.substring(1));
                    if (el) el.scrollIntoView({ behavior: 'smooth' });
                }, 1000);
            }
        });
    </script>
</body>
</html>
